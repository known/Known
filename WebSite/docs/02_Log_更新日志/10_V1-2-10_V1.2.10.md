# V1.2.10

## æ›´æ–°æ—¥æœŸ

- 2023-07-24

## æ›´æ–°å†…å®¹

- ğŸ›ä¿®å¤èœå•å’Œå¸¸ç”¨åŠŸèƒ½æ‰“å¼€é‡å¤é¡µç­¾é—®é¢˜
- ğŸ›ä¿®å¤å¹³å°ä¼ä¸šæ— æ³•æ–°å¢ç”¨æˆ·é—®é¢˜
- ğŸ˜„ä¸»ç•Œé¢é¡µç­¾å¢åŠ å…³é—­å½“å‰æ“ä½œ
- ğŸ”¨ä¼˜åŒ–Formã€Dialogç»„ä»¶å¸ƒå±€
- ğŸ˜„æ–°å¢Toolbarç»„ä»¶
- ğŸ›ä¿®å¤æŸ¥è¯¢æ—¶æ¡ä»¶è¢«æ¸…ç©ºé—®é¢˜
- ğŸ”¨ä¼˜åŒ–é¡µé¢å¸ƒå±€ï¼Œè‡ªé€‚åº”ç§»åŠ¨ç«¯
- ğŸ˜„Dateç»„ä»¶å¢åŠ Weekå’ŒTimeç±»å‹
- ğŸ˜„Inputç»„ä»¶å¢åŠ ç±»å‹Color, Email, Rrange, Search, Tel, Url

## è¯¦ç»†å†…å®¹

**1. é¡µç­¾å¢åŠ å…³é—­å½“å‰æ“ä½œ**

![å…³é—­å½“å‰](https://foruda.gitee.com/images/1690159169188790320/834c6058_14334.png "å±å¹•æˆªå›¾")

**2. Toolbarç»„ä»¶**

- å‘ˆç°ä¸€ç»„æŒ‰é’®
- å¯å¤–éƒ¨æ“ä½œæŒ‰é’®æ˜¾ç¤ºå’Œç¦ç”¨

```csharp
private Toolbar toolbar; //ç»„ä»¶å®ä¾‹ï¼Œé€šè¿‡Buildèµ‹å€¼

private void BuildButtons(RenderTreeBuilder builder)
{
    //å®šä¹‰å·¥å…·æŒ‰é’®ï¼Œä¹Ÿå¯ä»é…ç½®æ–‡ä»¶åŠ è½½
    var tools = new List<ButtonInfo>
    {
        new ButtonInfo("Load", "åŠ è½½", "fa fa-refresh", StyleType.Default),
        new ButtonInfo("View", "åªè¯»", "fa fa-file-text-o", StyleType.Warning),
        new ButtonInfo("Edit", "ç¼–è¾‘", "fa fa-file-o", StyleType.Success),
        new ButtonInfo("Check", "éªŒè¯", "fa fa-check", StyleType.Info),
        new ButtonInfo("Save", "ä¿å­˜", "fa fa-save", StyleType.Primary),
        new ButtonInfo("Clear", "æ¸…ç©º", "fa fa-trash-o", StyleType.Danger),
        new ButtonInfo("Clear", "ç¦ç”¨", "fa fa-trash-o", StyleType.Primary) { Enabled = false }
    };
    //æ„å»ºå·¥å…·æ¡ç»„ä»¶
    builder.Component<Toolbar>()
           .Set(c => c.Style, "demo")        //å·¥å…·æ¡æ ·å¼
           .Set(c => c.Tools, tools)         //æŒ‰é’®åˆ—è¡¨
           .Set(c => c.OnAction, OnAction)   //å·¥å…·æ¡æ“ä½œ
           .Build(value => toolbar = value); //èµ‹å€¼ç»„ä»¶å®ä¾‹
}

//å·¥å…·æ¡æŒ‰é’®æ–¹æ³•ï¼Œæ–¹æ³•åç§°ä¸æŒ‰é’®Codeä¸€è‡´ï¼Œé€šè¿‡OnActionåå°„è°ƒç”¨
public virtual void Load() { }
public void View() => SetReadOnly(true);
public void Edit() => SetReadOnly(false);
public void Check() => Validate();
public virtual void Save() => Submit(data => formData = Utils.ToJson(data));

//å·¥å…·æ¡æ“ä½œæ–¹æ³•
private void OnAction(ButtonInfo info)
{
    var method = GetType().GetMethod(info.Id);
    if (method == null)
        UI.Toast($"{info.Name}æ–¹æ³•ä¸å­˜åœ¨ï¼");
    else
        method.Invoke(this, null);
    StateChanged();
}

//æ“ä½œæŒ‰é’®å¯è§
//æ–¹æ³•åŸå‹ï¼ŒitemIdsä¸ºæŒ‰é’®Code
public void SetItemVisible(bool visible, params string[] itemIds)
//æ“ä½œç¤ºä¾‹
toolbar.SetItemVisible(false, "Edit", "Check");

//æ“ä½œæŒ‰é’®ç¦ç”¨
//æ–¹æ³•åŸå‹ï¼ŒitemIdsä¸ºæŒ‰é’®Code
public void SetItemEnabled(bool enabled, params string[] itemIds)
//æ“ä½œç¤ºä¾‹
toolbar.SetItemEnabled(false, "Edit", "Check");
```

**3. è‡ªé€‚åº”ç§»åŠ¨ç«¯**

- è‡ªé€‚åº”é¡µé¢æœ‰ç™»å½•ã€ä¸»é¡µã€è¡¨å•ã€åˆ—è¡¨ã€å·¦å³å¸ƒå±€

![è¾“å…¥å›¾ç‰‡è¯´æ˜](https://foruda.gitee.com/images/1690160177258973909/e5e6fcb8_14334.png "å±å¹•æˆªå›¾")
![è¾“å…¥å›¾ç‰‡è¯´æ˜](https://foruda.gitee.com/images/1690160277394334951/1e73d75c_14334.png "å±å¹•æˆªå›¾")
![è¾“å…¥å›¾ç‰‡è¯´æ˜](https://foruda.gitee.com/images/1690160360072340931/f23fa1bb_14334.png "å±å¹•æˆªå›¾")

**4. Dateç»„ä»¶**

- æ”¯æŒæ—¥æœŸã€æœˆä»½ã€æ—¥æœŸå’Œæ—¶é—´ã€å‘¨åˆ«ã€æ—¶é—´5ç§ç±»å‹

```csharp
//H5æ—¥æœŸç»„ä»¶
table.Field<Date>("æ—¥æœŸ", "Date").Build();
//H5æœˆä»½ç»„ä»¶
table.Field<Date>("æœˆä»½", "Month").Set(f => f.DateType, DateType.Month).Build();
//H5æ—¥æœŸå’Œæ—¶é—´ç»„ä»¶
table.Field<Date>("æ—¥æœŸæ—¶é—´", "DateTime").Set(f => f.DateType, DateType.DateTime).Build();
//H5å‘¨åˆ«ç»„ä»¶
table.Field<Date>("æ˜ŸæœŸ", "Week").Set(f => f.DateType, DateType.Week).Build();
//H5æ—¶é—´ç»„ä»¶
table.Field<Date>("æ—¶é—´", "Time").Set(f => f.DateType, DateType.Time).Build();
```

**5. Inputç»„ä»¶**

- æ”¯æŒColor, Email, Range, Search, Tel, Url 6ç§ç±»å‹

```csharp
//æ‹¾è‰²å™¨ç»„ä»¶
table.Field<Input>("é¢œè‰²", "Color").Set(f => f.Type, InputType.Color).Build();
//Emailç»„ä»¶
table.Field<Input>("é‚®ç®±", "Email").Set(f => f.Type, InputType.Email).Build();
//sliderç»„ä»¶
table.Field<Input>("Range", "Range").Set(f => f.Type, InputType.Range).Build();
//æœç´¢æ–‡æœ¬ç»„ä»¶
table.Field<Input>("æœç´¢", "Search").Set(f => f.Type, InputType.Search).Build();
//ç”µè¯å·ç ç»„ä»¶
table.Field<Input>("ç”µè¯å·ç ", "Tel").Set(f => f.Type, InputType.Tel).Build();
//URLç»„ä»¶
table.Field<Input>("URL", "Url").Set(f => f.Type, InputType.Url).Build();
```
