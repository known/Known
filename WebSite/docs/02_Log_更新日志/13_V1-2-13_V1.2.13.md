# V1.2.13

## æ›´æ–°æ—¥æœŸ

- 2023-08-17

## æ›´æ–°å†…å®¹

- ğŸ›ä¿®å¤è¡¨å•åˆ—è¡¨ä½ç½®çš„é—®é¢˜
- ğŸ”¨ä¼˜åŒ–é«˜çº§æŸ¥è¯¢ï¼Œæ ¹æ®å­—æ®µç±»å‹åŒºåˆ†ä¸‹æ‹‰æ¡ä»¶
- ğŸ”¨ä¼˜åŒ–æ–‡ä»¶å¯¼å…¥ç»„ä»¶åŠåç«¯åŠŸèƒ½
- ğŸ›ä¿®å¤ç©ºå€¼éªŒè¯æ­£åˆ™è¡¨è¾¾å¼é—®é¢˜
- ğŸ”¨ä¼˜åŒ–å¯¼å…¥æ¶æ„ï¼Œæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ¨¡å¼
- ğŸ˜„æ–°å¢æ•°æ®å­—å…¸å¯¼å…¥åŠŸèƒ½
- ğŸ˜„DataGridæ–°å¢SetDataæ–¹æ³•
- ğŸ˜„Uploadç»„ä»¶æ–°å¢Buttonæ ·å¼
- ğŸ”¨KCConfigæ·»åŠ ProductIdï¼Œä»…åˆå§‹åŒ–åŠ è½½ä¸€æ¬¡
- ğŸ˜„æ–°å¢Loadingç»„ä»¶
- ğŸ›ä¿®å¤ç³»ç»Ÿæ¿€æ´»é¡µé¢æ ·å¼é—®é¢˜
- ğŸ”¨KRConfigå¢åŠ ç‰ˆæƒå’Œè®¸å¯é…ç½®
- ğŸ˜„æ–°å¢Promptå¼¹çª—ç»„ä»¶

## è¯¦ç»†å†…å®¹

**1. DataGridåŠŸèƒ½**

- å¯¼å…¥æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ¨¡å¼ï¼Œé»˜è®¤ä¸ºå¼‚æ­¥
- æ•°æ®å­—å…¸å¢åŠ å¯¼å…¥åŠŸèƒ½
- æ–°å¢SetDataæ–¹æ³•

```csharp
//åŒæ­¥å¯¼å…¥
public void Import() => ShowImport(Name, typeof(TItem), false);

//å¼‚æ­¥å¯¼å…¥
public void Import() => ShowImport(Name, typeof(TItem));

//SetData
grid?.SetData(new List<TItem>());
```

**2. Uploadç»„ä»¶**

- æ–°å¢Buttonæ ·å¼å¯¼å…¥å­—æ®µ

```csharp
protected override void BuildRenderTree(RenderTreeBuilder builder)
{
    builder.Field<Upload>("é™„ä»¶ï¼š", "Upload")
           .Set(f => f.IsButton, true)
           .Set(f => f.ButtonText, "å¯¼å…¥é™„ä»¶")
           .Build();
}
```

![Uploadç»„ä»¶](https://foruda.gitee.com/images/1692190214817244644/7e7e0fa6_14334.png "å±å¹•æˆªå›¾")

**3. KCConfigé…ç½®**

- å¢åŠ ProductIdé…ç½®
- ä»…åˆå§‹åŒ–åŠ è½½ä¸€æ¬¡ï¼Œå…³äºç³»ç»Ÿé¡µé¢ä¸é‡å¤åŠ è½½
- å˜æ›´è‡ªå®šä¹‰æ–¹å¼

```csharp
//åœ¨é¡¹ç›®åˆå§‹åŒ–æ–¹æ³•ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç 
internal static void Initialize()
{
    ...
    //è¯¥è¡Œéœ€åœ¨KCConfig.AddWebPlatformä¹‹åæ·»åŠ æ‰èƒ½è¦†ç›–ProductId
    KCConfig.ProductId = GetProductId();
}

private static string GetProductId()
{
    var id = "è¿™é‡Œå®šä¹‰æ‚¨çš„ID";
    return $"PM-{Config.AppId}-{id:000000}";
}
```

**4. Loadingç»„ä»¶**

- ç”¨äºè€—æ—¶æ“ä½œæç¤º

```csharp
protected override void BuildRenderTree(RenderTreeBuilder builder)
{
    builder.Button("æäº¤", Callback(OnLoading), StyleType.Primary);
}

private void OnLoading()
{
    UI.ShowLoading("æ•°æ®æäº¤ä¸­..."); //æ˜¾ç¤ºLoading
    Task.Run(() =>
    {
        Thread.Sleep(2000);
        UI.CloseLoading(); //å…³é—­Loading
    });
}
```

![Loadingç»„ä»¶](https://foruda.gitee.com/images/1692190492568603801/c9f4a441_14334.png "å±å¹•æˆªå›¾")

**5. KRConfigé…ç½®**

- å¢åŠ IsEditCopyrightï¼Œæ˜¯å¦å…è®¸ç¼–è¾‘ç‰ˆæƒå’Œè®¸å¯ï¼Œé»˜è®¤true
- å¢åŠ Copyrightï¼Œè‡ªå®šä¹‰å…³äºç³»ç»Ÿé¡µé¢çš„ç‰ˆæƒä¿¡æ¯
- å¢åŠ SoftTermsï¼Œè‡ªå®šä¹‰å…³äºç³»ç»Ÿé¡µé¢çš„è®¸å¯ä¿¡æ¯

```csharp
//åœ¨å‰ç«¯åˆå§‹åŒ–æ–¹æ³•ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç 
internal static void Initialize()
{
    KRConfig.IsEditCopyright = false; //ä¸å…è®¸ä¿®æ”¹ç‰ˆæƒå’Œè®¸å¯
    KRConfig.Copyright = "å®šä¹‰ä½ çš„ç‰ˆæƒä¿¡æ¯";
    KRConfig.SoftTerms = "å®šä¹‰ä½ çš„è®¸å¯ä¿¡æ¯";
}
```

**6. Promptç»„ä»¶**

- ç”¨äºå¼¹çª—æ•æ·è¡¨å•

```csharp
protected override void BuildRenderTree(RenderTreeBuilder builder)
{
    builder.Button("å¤„ç†", Callback(OnPrompt), StyleType.Primary);
}

private void OnPrompt()
{
    UI.Prompt("å¼‚å¸¸å¤„ç†", new(300, 200), builder =>
    {
        builder.Field<TextArea>("åŸå› ", "Reason", true).Build();
    },
    data =>
    {
        //æäº¤æ•°æ®
        UI.CloseDialog();
    });
}
```

![Promptç»„ä»¶](https://foruda.gitee.com/images/1692255867523895720/1ad0209a_14334.png "å±å¹•æˆªå›¾")
